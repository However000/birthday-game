<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>å°‹å¯¶éŠæˆ²é–‹å§‹</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px;
    }
    .btn {
      padding: 12px 20px;
      background: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      display: inline-block;
      margin: 10px;
      font-size: 18px;
      border: none;
      cursor: pointer;
    }
    #qr-reader {
      width: 300px;
      margin: 20px auto;
      display: none; 
    }
    .hint-card {
      display: none;
      width: 200px;
      height: 200px;
      border: 2px solid #333;
      margin: 10px auto;
      background: #fff;
      padding: 10px;
      cursor: pointer;
      font-family: monospace;
      white-space: pre;
      font-size: 20px;
      transition: transform 0.3s;
    }
  </style>
  <!-- QR Scanner Library -->
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>

<h1>ğŸ‰ å°‹å¯¶éŠæˆ²é–‹å§‹ï¼</h1>
<p>ç¬¬ä¸€æ¢æç¤ºï¼š</p>
<h2>ã€ŒIn a pairã€</h2>
<h2>ã€ŒDifferent in Colourã€</h2>
<p>è«‹é¸æ“‡ Part 1 æˆ– Part 2 é–‹å§‹ï¼Œä»»æ„é †åºéƒ½å¯ã€‚</p>

<!-- é–‹ç™¼ç”¨è·³é  -->
<a class="btn" href="speakerA.html">Speaker A (å•é¡Œé—œå¡)</a>
<a class="btn" href="speakerB.html">Speaker B (è¿·å®®é—œå¡)</a>

<br><br>

<!-- æƒæ QR æŒ‰éˆ• -->
<button class="btn" id="scanBtn" onclick="startScan()">ğŸ“· æƒæ QR Code</button>
<div id="qr-reader"></div>

<!-- æç¤ºå¡ -->
<div>
  <div id="hintA" class="hint-card">XXXXX<br>XXXXX<br>XXXXX<br>XXXXX<br>XXXXX</div>
  <div id="hintB" class="hint-card">____5_<br>1_2___<br>_3___<br>__4__<br>____6</div>
</div>

<script>
function updateHintCards() {
  if(localStorage.getItem('partA_done')) document.getElementById('hintA').style.display='block';
  if(localStorage.getItem('partB_done')) document.getElementById('hintB').style.display='block';
  
  // é¡¯ç¤ºæœ€çµ‚æƒææç¤º
  if(localStorage.getItem('partA_done') && localStorage.getItem('partB_done')){
    document.getElementById('scanBtn').textContent="ğŸ“· æƒææœ€çµ‚ç­”æ¡ˆ";
  }
}

// é»æ“Šæç¤ºå¡æ”¾å¤§ç¸®å°
document.querySelectorAll('.hint-card').forEach(card=>{
  card.addEventListener('click',()=>{
    card.style.transform = (card.style.transform==='scale(1.5)')? 'scale(1)' : 'scale(1.5)';
  });
});

updateHintCards();

// QR Scanner
function startScan() {
  document.getElementById("qr-reader").style.display = "block";
  const qrReader = new Html5Qrcode("qr-reader");
  qrReader.start(
    { facingMode: "environment" },
    { fps: 10, qrbox: 250 },
    qrCodeMessage => {
      qrReader.stop();
      console.log("Scanned:", qrCodeMessage);

      // æ ¹æ“šæƒæå…§å®¹åˆ¤æ–·
      if(qrCodeMessage.includes('speakerA.html')) {
        localStorage.setItem('partA_done','true');
        alert("å·²ç²å¾— Part A æç¤ºå¡ï¼");
        updateHintCards();
      }
      else if(qrCodeMessage.includes('speakerB.html')) {
        localStorage.setItem('partB_done','true');
        alert("å·²ç²å¾— Part B æç¤ºå¡ï¼");
        updateHintCards();
      }
      else if(qrCodeMessage.includes('gundam.html')) {
        if(localStorage.getItem('partA_done') && localStorage.getItem('partB_done')){
          window.location.href = qrCodeMessage;
        } else {
          alert("è«‹å…ˆå®Œæˆ Part A å’Œ Part B æ‰èƒ½æƒææœ€çµ‚ç­”æ¡ˆï¼");
        }
      } else {
        alert("æœªçŸ¥ QR Codeï¼Œè«‹æƒæéŠæˆ²å…§ QR");
      }
    },
    errorMessage => {
      // ignore scanning errors
    }
  );
}
</script>

</body>
</html>
