<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>å°‹å¯¶éŠæˆ²é–‹å§‹</title>
  <style>
    body { font-family: Arial; text-align:center; padding:40px; }
    .btn { padding:12px 20px; background:#007bff; color:white; border-radius:6px; margin:10px; font-size:18px; border:none; cursor:pointer; }
    #qr-reader { width:300px; margin:20px auto; display:none; }
    .hint-card { display:none; width:200px; height:200px; border:2px solid #333; margin:10px auto; background:#fff; padding:10px; cursor:pointer; font-family:monospace; white-space:pre; font-size:20px; transition: transform 0.3s; }
  </style>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>

<h1>ğŸ‰ å°‹å¯¶éŠæˆ²é–‹å§‹ï¼</h1>
<p>ç¬¬ä¸€æ¢æç¤ºï¼šã€ŒIn a pairã€ / ã€ŒDifferent in Colourã€</p>
<p>é¸æ“‡ Part 1 æˆ– Part 2 é–‹å§‹ï¼ˆå¿…é ˆæƒæ QR æ‰èƒ½é€²å…¥ï¼‰</p>

<!-- QR æƒææŒ‰éˆ• -->
<button class="btn" onclick="startScan('speakerA.html')">ğŸ“· æƒæ Speaker A QR</button>
<button class="btn" onclick="startScan('speakerB.html')">ğŸ“· æƒæ Speaker B QR</button>

<br><br>

<div id="qr-reader"></div>

<div>
  <div id="hintA" class="hint-card">XXXXX<br>XXXXX<br>XXXXX<br>XXXXX<br>XXXXX</div>
  <div id="hintB" class="hint-card">____5_<br>1_2___<br>_3___<br>__4__<br>____6</div>
</div>

<script>
function updateHintCards() {
  if(localStorage.getItem('partA_done')) document.getElementById('hintA').style.display='block';
  if(localStorage.getItem('partB_done')) document.getElementById('hintB').style.display='block';
  if(localStorage.getItem('partA_done') && localStorage.getItem('partB_done')){
    document.getElementById('scanBtnFinal').style.display='inline-block';
  }
}

// é»æ“Šæç¤ºå¡æ”¾å¤§/ç¸®å°
document.querySelectorAll('.hint-card').forEach(card=>{
  card.addEventListener('click',()=>{
    card.style.transform=(card.style.transform==='scale(1.5)')?'scale(1)':'scale(1.5)';
  });
});

updateHintCards();

// QR æƒæå‡½æ•¸
function startScan(expectedURL) {
  document.getElementById("qr-reader").style.display = "block";
  const qrReader = new Html5Qrcode("qr-reader");
  qrReader.start(
    { facingMode: "environment" },
    { fps:10, qrbox:250 },
    qrMessage=>{
      if(qrMessage.includes(expectedURL)){
        qrReader.stop();
        alert("æƒææˆåŠŸï¼å³å°‡é€²å…¥ " + expectedURL);
        window.location.href = qrMessage;
      } else {
        alert("è«‹æƒææ­£ç¢ºçš„ QR Codeï¼");
      }
    },
    errorMessage=>{}
  );
}
</script>

</body>
</html>
