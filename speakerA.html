<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Speaker A</title>
<style>
body { font-family: Arial; text-align:center; padding:30px; }
.question-block { margin:20px 0; padding:15px; border:1px solid #ddd; border-radius:6px; }
.btn { padding:12px 20px; background:#007bff; color:white; border:none; border-radius:6px; margin:10px; font-size:18px; cursor:pointer; }
#qr-reader { width:300px; margin:20px auto; display:none; }
.hint-card { width:200px; height:200px; border:2px solid #333; margin:10px auto; background:#fff; padding:10px; cursor:pointer; font-family:monospace; white-space:pre; font-size:20px; }
</style>
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>

<h1>ğŸ”Š Speaker A</h1>
<p>å®Œæˆå•é¡Œä»¥æ­ç¤º Part A æç¤ºå¡</p>

<div id="questions"></div>

<div id="hintCard" class="hint-card">
XXXXX
XXXXX
XXXXX
XXXXX
XXXXX
</div>

<!-- æƒææŒ‰éˆ• -->
<button class="btn" id="scanBtn" onclick="startScan()">ğŸ“· æƒæ Part B QR</button>
<div id="qr-reader"></div>

<script>
// 5x5 æç¤ºå¡
const hintRows = [
  "EICAP",
  "GSUOV",
  "HMBFL",
  "JKDQW",
  "FYRXN"
];

const questions = [
  {q:"Q1: ä½ ç¬¬ä¸€æ¬¡é€ç•€æˆ‘å˜…ç¦®ç‰©ä¿‚å’©ï¼Ÿ", a:"Gift"},
  {q:"Q2: æˆ‘æœ€é¾æ„é£Ÿå’©ï¼Ÿ", a:"Sushi"},
  {q:"Q3: æˆ‘å“‹ç¬¬ä¸€é¤é£Ÿå’—å’©ï¼Ÿ", a:"Pizza"},
  {q:"Q4: é‚Šä¸€å€‹ä¿‚æˆ‘æœ€é¾æ„å˜…å‹•æ¼«ï¼Ÿ", a:"Gundam"},
  {q:"Q5: æˆ‘æœ€é¾æ„å»é‚Šåº¦æ•£æ­¥ï¼Ÿ", a:"Park"}
];

const container = document.getElementById("questions");
let revealed = 0;

questions.forEach((item,i)=>{
  const block = document.createElement("div");
  block.className="question-block";
  block.innerHTML=`<p><b>${item.q}</b></p>
                   <input id="ans${i}" placeholder="ä½ çš„ç­”æ¡ˆ">
                   <button onclick="check(${i})">æäº¤</button>
                   <p id="r${i}"></p>`;
  container.appendChild(block);
});

function check(i){
  const userAns=document.getElementById("ans"+i).value.trim().toLowerCase();
  const result=document.getElementById("r"+i);
  if(userAns===questions[i].a.toLowerCase()){
    result.innerHTML="âœ” æ­£ç¢ºï¼"; result.style.color="green";
    if(revealed<i+1){ revealed=i+1; updateHintCard(); }
  } else {
    result.innerHTML="âŒ éŒ¯å–‡ï½"; result.style.color="red";
  }
}

function updateHintCard(){
  let display="";
  for(let i=0;i<5;i++){
    display += (i<revealed)? hintRows[i].split('').join('') : 'XXXXX';
    display += "\n";
  }
  document.getElementById("hintCard").textContent = display;
  // è‡ªå‹•å­˜ Part A å®Œæˆ
  if(revealed===questions.length) localStorage.setItem('partA_done','true');
}

// é»æ“Šæç¤ºå¡æ”¾å¤§ç¸®å°
document.getElementById("hintCard").addEventListener('click',()=>{
  const card = document.getElementById("hintCard");
  card.style.transform = (card.style.transform==='scale(1.5)')? 'scale(1)': 'scale(1.5)';
});

// QR Scanner
function startScan(){
  document.getElementById("qr-reader").style.display="block";
  const qrReader = new Html5Qrcode("qr-reader");
  qrReader.start(
    {facingMode:"environment"},
    {fps:10, qrbox:250},
    qrMessage=>{
      qrReader.stop();
      if(qrMessage.includes('speakerB.html')){
        localStorage.setItem('partB_done','true');
        window.location.href=qrMessage;
      }
    }, error=>{}
  );
}

</script>
</body>
</html>
